(this.webpackJsonpalbum=this.webpackJsonpalbum||[]).push([[0],{65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var s=a(13),n=a.n(s),c=a(54),i=a.n(c),l=(a(65),a(37)),o=a(19),r=(a(66),a(67),a(2)),d=a(3),b=a(29),j=a(11),u=a(12),m=a(14),h=a.p+"static/media/logo.42af7f30.png",g=a(8);function x(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark p-4 m-2",children:Object(g.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(g.jsx)("img",{src:h,alt:"",className:"logo"}),Object(g.jsx)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(g.jsx)("span",{class:"navbar-toggler-icon"})})]})}),"alignChildrenCenter"==e.msg?Object(g.jsx)("div",{className:"d-flex mt-5 justify-content-center align-items-center",children:e.children}):Object(g.jsx)(g.Fragment,{children:e.children}),Object(g.jsx)("div",{className:"ele"})]})}a(69);var p=a.p+"static/media/white-texture.62a2ef74.jpg",O=a.p+"static/media/AlbumLoader.25d06eb8.gif",f=a(55),v=a(39),y=a(46),N=a(59),w=a(57),P=a(41),k=Object(w.a)({apiKey:"AIzaSyDZFlwpw91E6UoJ8LpfsLZD0DX5-yTlhdw",authDomain:"gravity-studio.firebaseapp.com",projectId:"gravity-studio",storageBucket:"gravity-studio.appspot.com",messagingSenderId:"578866384591",appId:"1:578866384591:web:63e43b531ce5878911f1ba",measurementId:"G-VHWQ6CNY3C"}),S=Object(P.c)(k);function C(e){return Object(P.b)(Object(P.d)(Object(P.a)(S,"Albums"))).then((function(t){var a=!1,s=null;return t.forEach((function(t){t.id==e&&(console.log("Album Exists"),a=!0,s=t.data())})),[a,s]}))}var L=a(33);function A(e){var t=Object(s.useState)(null),a=Object(m.a)(t,2),n=a[0],c=a[1],i=Object(s.useState)(null),l=Object(m.a)(i,2),r=l[0],d=l[1],b=e.match.params.id,j=Object(L.b)();if(C(b).then((function(e){var t=Object(m.a)(e,2),a=t[0],s=t[1];c(!!a),a&&d(s)})),n&&r){var u=j.currentUser;return 1==r.passCode&&null!=u&&u.email==r.email||0==r.passCode?Object(g.jsx)(F,{albumData:r,albumId:b}):Object(g.jsx)(o.a,{to:"/?c=".concat(b)})}return 0==n?(console.log("Redirecting 404"),Object(g.jsx)(o.a,{to:"/404"})):Object(g.jsx)(g.Fragment,{})}var F=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;Object(r.a)(this,a),(s=t.call(this,e)).nextButtonClick=function(){s.flipBook&&s.flipBook.pageFlip()?s.flipBook.pageFlip().flipNext():console.log("no")},s.prevButtonClick=function(){s.flipBook&&s.flipBook.pageFlip()?s.flipBook.pageFlip().flipPrev():console.log("no")},s.onPage=function(e){var t;s.setState({page:e.data}),t=0==s.state.page?"-25%":s.state.page==s.state.totalPage-1?"25%":"0%",s.setState({moveAlbum:t})},s.onInit=function(e){s.flipBook&&s.flipBook.pageFlip()&&s.setState({totalPage:s.flipBook.pageFlip().getPageCount()})},s.handleLoad=function(e){var t=s.state.loadedPages+1,a=s.pages;s.setState({loadedPages:t,loadedPercentage:t/a*100+"%"}),console.log(e.target.getAttribute("page"),"Loaded. loadedPages=",s.state.loadedPages),"100%"===s.state.loadedPercentage&&s.setState({albumStyle:{},isLoaded:!0})},s.handleError=function(e){e.target.alt=e.target.getAttribute("page")+" Loading failed",s.setState({isError:!0})},s.album=e.albumData,s.id=e.albumId,s.url="http://localhost:3001/api/album?folderId="+s.album.folderId+"&",s.imagesArray=E(s.album),s.pages=2*(s.album.noOfPages-2)+2,s.state={isInvalidAlbum:!1,page:0,totalPage:0,moveAlbum:"-25%",albumStyle:{visibility:"hidden"},isLoaded:!1,isError:!1,noAlbumFound:!1,loadedPages:1,loadedPercentage:0};var n=new Image;return n.src=s.url+"num=2&type=single&isLeftPage=false",n.onload=function(){s.albumWidth=n.naturalWidth,s.albumHeight=n.naturalHeight},s.handleLoad=s.handleLoad.bind(Object(b.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){document.title=this.album.displayName+" Album | Gravity Studio"}},{key:"render",value:function(){var e=this,t=this.state,a=t.moveAlbum,s=t.isLoaded,n=t.isError;return t.isInvalidAlbum?Object(g.jsx)(o.a,{to:"/404"}):Object(g.jsxs)(x,{children:[!s&&!n&&Object(g.jsxs)("div",{className:"w-100 h-75 d-flex justify-content-center align-items-center flex-column",children:[Object(g.jsx)("div",{children:Object(g.jsx)("img",{src:O,alt:"Loading...",style:{width:"50vw"}})}),Object(g.jsx)("div",{class:"progress",style:{width:"50%",backgroundColor:"gray",height:"0.7rem"},children:Object(g.jsx)("div",{class:"progress-bar progress-purple",role:"progressbar",style:{width:this.state.loadedPercentage},"aria-valuenow":this.state.loadedPages,"aria-valuemin":0,"aria-valuemax":this.pages})}),Object(g.jsx)("span",{className:"m-5 text-light",children:"Launching Your Album"})]}),n&&Object(g.jsx)("div",{className:"w-100 h-75 d-flex justify-content-center align-items-center flex-column",children:Object(g.jsx)("span",{className:"m-5 text-light",children:"Album Loading Failed"})}),Object(g.jsxs)("div",{className:"container w-100 d-flex flex-column justify-content-center align-items-center Album-container",style:this.state.albumStyle,children:[Object(g.jsxs)("h3",{className:"text-light mb-3",children:[" ",this.album.displayName," ",this.album.albumType," Album"]}),Object(g.jsxs)("div",{className:"message-turn text-light",children:[" ","To view album, Turn your phone"]}),Object(g.jsxs)(f.a,{width:1e3,height:740,size:"stretch",minWidth:0,maxWidth:2800,minHeight:0,maxHeight:800,maxShadowOpacity:1,mobileScrollSupport:!0,showCover:!0,className:"Album-content",onFlip:this.onPage.bind(this),onInit:this.onInit,style:{transform:"translateX(".concat(a,")")},ref:function(t){return e.flipBook=t},children:[Object(g.jsx)(I,{type:"right",children:Object(g.jsx)("img",{className:"img",src:this.url+"num=1&type=double&isLeftPage=false",page:"Front Cover",onError:this.handleError,onLoad:this.handleLoad})}),Object(g.jsx)(I,{type:"left",children:Object(g.jsx)("img",{src:p,height:this.albumHeight,width:this.albumWidth,style:{maxWidth:"100%",maxHeight:"95%"}})}),this.imagesArray.map((function(t,a){return Object(g.jsx)(B,{type:t.type,children:Object(g.jsx)("img",{className:"img",src:e.url+t.src,page:a,onError:e.handleError,onLoad:e.handleLoad})})})),Object(g.jsx)(I,{type:"right",children:Object(g.jsx)("img",{src:p,height:this.albumHeight,width:this.albumWidth,style:{maxWidth:"100%",maxHeight:"95%"}})}),Object(g.jsx)(I,{type:"left",children:Object(g.jsx)("img",{className:"img",src:this.url+"num=1&type=double&isLeftPage=true",page:"Back Cover",onError:this.handleError,onLoad:this.handleLoad})})]}),Object(g.jsxs)("div",{className:"row navigation-row align-items-start mb-5",children:[Object(g.jsx)("button",{className:"btn text-light"}),Object(g.jsx)("button",{className:"btn text-light"}),Object(g.jsx)("button",{className:"btn text-light w-auto mx-5",onClick:this.prevButtonClick.bind(this),children:Object(g.jsx)(v.a,{icon:y.a})}),Object(g.jsxs)("div",{className:"text-light my-auto",children:[Object(g.jsx)("span",{children:this.state.page})," of"," ",Object(g.jsx)("span",{children:this.state.totalPage})]}),Object(g.jsx)("button",{className:"btn text-light w-auto mx-5",onClick:this.nextButtonClick.bind(this),children:Object(g.jsx)(v.a,{icon:y.b})}),Object(g.jsx)("button",{className:"btn text-light",children:Object(g.jsx)(v.a,{icon:y.c})}),Object(g.jsx)("button",{className:"btn text-light",children:Object(g.jsx)(v.a,{icon:N.a})})]})]})]})}}]),a}(n.a.Component),I=n.a.forwardRef((function(e,t){return Object(g.jsx)("div",{className:"page cover overflow-hidden",ref:t,"data-density":"hard",children:Object(g.jsx)("div",{className:"img-"+e.type,children:e.children})})})),B=n.a.forwardRef((function(e,t){return Object(g.jsx)("div",{className:"page",ref:t,children:Object(g.jsx)("div",{className:"img-"+e.type,children:e.children})})})),E=function(e){var t=[];t.push({src:"num=2&type=single&isLeftPage=false",type:"right"});for(var a=3;a<e.noOfPages;a++)t.push({src:"num="+a+"&type=double&isLeftPage=true",type:"left"}),t.push({src:"num="+a+"&type=double&isLeftPage=false",type:"right"});return t.push({src:"num="+e.noOfPages+"&type=single&isLeftPage=true",type:"left"}),t};function D(){var e=Object(s.useState)(""),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),i=Object(m.a)(c,2),l=i[0],r=i[1],d=Object(s.useState)(!1),b=Object(m.a)(d,2),j=b[0],u=b[1],h=Object(s.useState)(!1),p=Object(m.a)(h,2),O=p[0],f=p[1],v=Object(s.useState)(!1),y=Object(m.a)(v,2),N=y[0],w=y[1],P=Object(s.useState)(!1),k=Object(m.a)(P,2),S=k[0],A=k[1],F=Object(s.useState)(!1),I=Object(m.a)(F,2),B=I[0],E=I[1],D=Object(s.useState)(!1),W=Object(m.a)(D,2),T=W[0],H=W[1],R=Object(s.useState)(null),V=Object(m.a)(R,2),U=V[0],Y=V[1],G=Object(L.b)(),J=function(e){f(!1),H(!0),E(!1),Object(L.c)(G,L.a).then((function(){Object(L.d)(G,U.email,l).then((function(e){e.user;console.log("Success"),f(!0),H(!1)})).catch((function(e){e.code;var t=e.message;console.log(t),H(!1),E(!0),f(!1)}))}))},z=function(e){f(!1),H(!0),A(!1),""!==a?C(a.trim()).then((function(e){var t=Object(m.a)(e,2),a=t[0],s=t[1];if(a){if(Y(s),u(!0),1===s.passCode){w(!0);var n=G.currentUser;null!=n&&n.email==s.email?(w(!1),console.log("Success")):f(!1)}else console.log("Success");H(!1)}else u(!1),A(!0),H(!1)})).catch((function(e){console.log(e),A(!0),u(!1),H(!1)})):(A(!0),u(!1),H(!1))};return j&&(N&&O||!N)?Object(g.jsx)(o.a,{to:{pathname:"/album/".concat(a)}}):Object(g.jsx)(x,{children:Object(g.jsxs)("div",{className:"row mt-5",children:[Object(g.jsx)("div",{className:"col-12 col-lg-6",children:Object(g.jsxs)("div",{className:"m-xl-5 pl-lg-5 m-md-3 text-center text-lg-left",children:[Object(g.jsx)("div",{className:"ml-lg-5 text-dark",children:"GRAVITY STUDIO"}),Object(g.jsxs)("div",{className:"ml-lg-5 py-1 h1 font-weight-bold text-light gradient-text overflow-visible",children:["View Your ",Object(g.jsx)("br",{}),"Photobook Online."]}),Object(g.jsxs)("div",{className:"mx-5 text-gray",children:["We host your Photo Books ",Object(g.jsx)("br",{}),"that can be viewed from ",Object(g.jsx)("br",{}),Object(g.jsx)("span",{className:"text-light",children:"Anywhere and at Any device"}),"."]}),Object(g.jsx)("div",{className:"mx-5 mt-3",children:Object(g.jsx)("a",{class:"btn btn-outline-light",children:"Coming Soon"})})]})}),Object(g.jsx)("div",{className:"col-12 col-lg-6 my-auto pr-lg-5",children:Object(g.jsx)("div",{className:"m-5 mr-lg-5 mt-5 mx-lg-5 px-md-5 px-lg-0",children:Object(g.jsxs)("div",{className:"border border-dark rounded p-5 mx-2 mx-md-5 mx-lg-1 text-gray light-shadow",children:[Object(g.jsx)("h3",{children:"Open With a Photobook Code"}),"Enter your Photobook code here",Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"text-small text-gray my-2",children:"Find the Code on backside of your album. If Not Found, Please contact your Photography Company."}),Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j&&N?J():z()},children:[Object(g.jsx)("input",{type:"text",name:"code",id:"code",className:"form-control mt-3 mb-2 bg-dark text-light",onChange:function(e){""!==e.target.value&&A(!1),n(e.target.value)}}),Object(g.jsx)("small",{class:"form-text mb-3 text-muted ".concat(S?"":"d-none"),children:"Please Enter a Valid Album Code."}),N&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"mt-4",children:"Seems Like this Album Requires a password. Please enter the password."}),Object(g.jsx)("input",{type:"password",name:"password",id:"password",className:"form-control mt-3 mb-2 bg-dark text-light",onChange:function(e){r(e.target.value)}}),Object(g.jsx)("small",{class:"form-text mb-3 text-muted ".concat(B?"":"d-none"),children:"The Password is incorrect."})]})]}),j&&N?Object(g.jsx)("button",{onClick:J,class:"btn btn-pink text-light my-2 w-auto ".concat(T?"d-none":""),children:"Login"}):Object(g.jsx)("button",{onClick:z,class:"btn btn-pink text-light my-2 w-auto ".concat(T?"d-none":""),children:"View Photobook"}),Object(g.jsxs)("div",{class:"lds-ring ".concat(T?"":"d-none"),children:[Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{})]})]})})})]})})}function W(){return Object(g.jsx)("div",{children:" 404 - Not Found "})}var T=function(){return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(l.a,{children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{exact:!0,path:"/album/:id",component:A}),Object(g.jsx)(o.b,{exact:!0,path:"/",component:D}),Object(g.jsx)(o.b,{exact:!0,path:"/404",component:W}),Object(g.jsx)(o.a,{to:"/"})]})})})},H=(a(91),a(92),a(95),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,96)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))});i.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(T,{})}),document.getElementById("root")),H()}},[[94,1,2]]]);
//# sourceMappingURL=main.f99ed329.chunk.js.map